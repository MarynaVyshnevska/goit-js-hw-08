{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAIA,MAAMC,EAAO,CACTC,KAAMC,SAASC,cAAc,kBAC7BC,SAAUF,SAASC,cAAc,2BACjCE,MAAOH,SAASC,cAAc,yBAI5BG,EAAW,GAEjBN,EAAKC,KAAKM,iBAAiB,UAQ3B,SAAsBC,GAClBA,EAAEC,iBAEFC,QAAQC,IAAI,aACZD,QAAQC,IAAIL,GAEZE,EAAEI,cAAcC,QAChBC,aAAaC,WAnBG,sB,IAOpBf,EAAKC,KAAKM,iBAAiB,QAASS,EAAAlB,GAAOmB,UAiB3C,SAAqBC,GACjBZ,EAASY,EAAMC,OAAOC,MAAQF,EAAMC,OAAOE,MAC3CP,aAAaQ,QA1BG,sBA0BkBC,KAAKC,UAAUlB,G,GAnBY,MAuBjE,SAAkBE,GACd,MAAMiB,EAAYX,aAAaY,QA/Bf,uBAgCVC,EAAaJ,KAAKK,MAAMH,GAC1BE,IACAjB,QAAQC,IAAI,gBAAiBgB,GACzBA,EAAWtB,QACXL,EAAKK,MAAMgB,MAAQM,EAAWtB,OAG9BsB,EAAWE,UACX7B,EAAKI,SAASiB,MAAQM,EAAWE,S,CA9B7CC","sources":["src/js/03-feedback.js"],"sourcesContent":["import lodash from 'lodash';\nimport '../css/03-feedback.css';\n\n\nconst refs = {\n    form: document.querySelector('.feedback-form'),\n    textarea: document.querySelector('.feedback-form textarea'),\n    email: document.querySelector('.feedback-form input'),\n};\nconst STORAGE_OBJ = 'feedback-form-state';\n// const STORAGE_EMAIL = 'feedback-email';\nconst formData = {};\n\nrefs.form.addEventListener('submit', onFormSubmit);\n// refs.textarea.addEventListener('input', lodash.throttle(onTextareaInput, 500));\n// refs.email.addEventListener('input', lodash.throttle(onEmailInput, 500));\nrefs.form.addEventListener('input', lodash.throttle(onFormInput, 500));\n\n\nfavorite();\n\nfunction onFormSubmit(e) { \n    e.preventDefault();\n\n    console.log('send form');\n    console.log(formData)\n    // clean form and localStorage\n    e.currentTarget.reset();\n    localStorage.removeItem(STORAGE_OBJ);\n    \n}\n\n// General object\nfunction onFormInput(event) {\n    formData[event.target.name] = event.target.value;\n    localStorage.setItem(STORAGE_OBJ, JSON.stringify(formData));\n    // console.log(formData);\n}\n\nfunction favorite(e) {\n    const savedInfo = localStorage.getItem(STORAGE_OBJ);\n    const parsedInfo = JSON.parse(savedInfo);\n    if (parsedInfo) {\n        console.log('parsedInfo ->', parsedInfo);\n        if (parsedInfo.email) {\n            refs.email.value = parsedInfo.email;\n            // console.log(parsedInfo.email);\n        }\n        if (parsedInfo.message) {\n            refs.textarea.value = parsedInfo.message;\n        }\n    }\n    \n\n\n}\n\n// save separately\n\n// function onFormSubmit(e) { \n//     e.preventDefault();\n\n//     console.log('send form');\n//     // clean form and localStorage\n//     e.currentTarget.reset();\n//     localStorage.removeItem(STORAGE_MSG);\n//     // email saved\n//     localStorage.removeItem(STORAGE_EMAIL);\n\n// }\n// Получть значение поля\n// сохранить в локальном хранилище\n// добавить троттл(что б не каждое нажатие а по времени)\n\n// function onTextareaInput(e) {\n//     const message = e.target.value;\n\n//     localStorage.setItem(STORAGE_MSG, message);\n//     // console.log(message);\n// }\n\n// function onEmailInput(e) {\n//     const subscriberEmail = e.target.value;\n\n//     localStorage.setItem(STORAGE_EMAIL, subscriberEmail);\n//     // console.log(subscriberEmail);\n// }\n// function favorite() {\n//     const savedEmail = localStorage.getItem(STORAGE_EMAIL);\n//     const savedTextarea = localStorage.getItem(STORAGE_MSG);\n\n//     if (savedEmail) {\n//         console.log(savedEmail);\n//         refs.email.value = savedEmail;\n//     }\n\n//     if (savedTextarea) {\n//         console.log(savedTextarea);\n//         refs.textarea.value = savedTextarea;\n//     }\n// }\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$refs","form","document","querySelector","textarea","email","$945622fd0f572e60$var$formData","addEventListener","e","preventDefault","console","log","currentTarget","reset","localStorage","removeItem","$parcel$interopDefault","throttle","event","target","name","value","setItem","JSON","stringify","savedInfo","getItem","parsedInfo","parse","message","$945622fd0f572e60$var$favorite"],"version":3,"file":"03-feedback.2c18c487.js.map"}